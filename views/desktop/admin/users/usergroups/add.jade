include ./partials/_display_value

article
  include ../../../common/widgets/breadcrumbs

  .row
    .span8.offset2.well.well-form
      form.form-horizontal(data-on-submit='admin.users.usergroups.create')
        - self.errors = self.errors || {}
        - var _group_class, _input_help_text

        - _group_class = ('short_name' in self.errors) ? 'error' : ''
        - _input_help_text = (self.errors['short_name']) ? self.errors['short_name'] : self.t('admin.users.usergroups.form.short_name_help')

        .control-group(class=_group_class)
          label.control-label(for='short_name') #{self.t('admin.users.usergroups.form.short_name_title')}
          .controls
            .row-fluid
              input.span12(type="text", name='short_name')
              span.help-block #{_input_help_text}

        include ./partials/_parent_group_select

        -each category, category_name in self.item_categories

          legend #{self.t('admin.setting.category.' + category_name)}
          -each item, item_name in category
            - _group_class = (item_name in self.errors) ? 'error' : ''
            - if (self.errors[item_name])
            - _input_help_text = self.errors[item_name]
            - else if (self.t.exists('admin.setting.' + item_name + '_help'))
            - _input_help_text = self.t('admin.setting.' + item_name + '_help')
            - else
            - _input_help_text = null

            .control-group(class=_group_class)
              label.control-label(for=item_name) #{self.t('admin.setting.' + item_name)}
              .controls
                .row-fluid
                  - if (!('value' in item))
                    - item.value = item.default
                  mixin display_value(item_name, item.value, item.type)
                  - if (_input_help_text)
                    span.help-block #{_input_help_text}

        .control-group
          .controls
            button.btn.btn-primary.btn-large(type='submit') #{self.t('admin.users.usergroups.form.submit_button')}
