- var mTypes = '$$ JSON.stringify(N.models.users.MediaInfo.types) $$'

.member-block

  .member-block__header
    - var allPhotosLink = self.link_to('users.album', { 'user_hid': self.user_hid })
    .member-block__header-title.h2
      a.member-block__header-link.pull-left(href=allPhotosLink)
        = self.t('title')
        |  (
        = self.count
        |)
        span.icon.icon-right-open
      a.member-block__header-collapser(href='#member-medias-info', data-toggle='collapse')
        .pull-right.icon.icon-collapse
        .pull-right.icon.icon-expand

  #member-medias-info.member-block__inner.collapse.in
    ul.thumb-grid.thumb-grid__m-sm.thumb-grid__m-responsive.thumb-grid__m-inline.thumb-grid__m-shadow-tail
      each media in self.medias
        - var href = self.link_to('users.media', { user_hid: self.user_hid, media_id: media.media_id })
        li.thumb-grid__item
          - var mType = media.type & ~mTypes.MASK_DELETED

          if mType === mTypes.IMAGE
            - var imageUrl = self.link_to('core.gridfs', { bucket: media.media_id + '_sm' })
            a.thumb(href=href)
              img.thumb__image(src=imageUrl)
              .thumb-caption.thumb-caption__m-secondary
                time.thumb-caption__line(datetime=media.ts)= self.date(media.ts, 'date')

          else if mType === mTypes.MEDIALINK
            .thumb
              a.thumb__inner(href=href)
                .thumb__icon.icon.icon-video
                img.thumb__image(src=media.medialink_data.thumb)
                .thumb-caption.thumb-caption__m-secondary
                  time.thumb-caption__line(datetime=media.ts)= self.date(media.ts, 'date')

          else if mType === mTypes.BINARY
            a.thumb(href=href)
              .thumb__icon.icon.icon-binary
              .thumb__content= media.file_name
              .thumb-caption.thumb-caption__m-secondary
                time.thumb-caption__line(datetime=media.ts)= self.date(media.ts, 'date')
