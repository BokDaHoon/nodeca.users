- var mTypes = '$$ JSON.stringify(N.models.users.MediaInfo.types) $$'

each media in self.medias
  - var href = self.link_to('users.media', { user_hid: self.user_hid, media_id: media.media_id })

  li.thumb-grid__item
    - var mType = media.type & ~mTypes.MASK_DELETED

    if mType === mTypes.IMAGE
      - var imageUrl = self.link_to('core.gridfs', { bucket: media.media_id + '_sm' })
      a.thumb(href=href)
        img.thumb__image(src=imageUrl)

        .thumb-caption.thumb-caption__m-secondary
          if media.comments_count > 0
            .pull-right.icon.icon-space-after.icon-quote= media.comments_count
          time.thumb-caption__line(datetime=media.ts)= self.date(media.ts, 'date')

    else if mType === mTypes.MEDIALINK
      .thumb
        a.thumb__inner(href=href)
          .thumb__icon.icon.icon-video
          img.thumb__image(src=media.medialink_data.thumb)

          .thumb-caption.thumb-caption__m-secondary
            if media.comments_count > 0
              .pull-right.icon.icon-space-after.icon-quote= media.comments_count
            time.thumb-caption__line(datetime=media.ts)= self.date(media.ts, 'date')

    else if mType === mTypes.BINARY
      a.thumb(href=href)
        .thumb__icon.icon.icon-binary
        .thumb__content= media.file_name

        .thumb-caption.thumb-caption__m-secondary
          if media.comments_count > 0
            .pull-right.icon.icon-space-after.icon-quote= media.comments_count
          time.thumb-caption__line(datetime=media.ts)= self.date(media.ts, 'date')
