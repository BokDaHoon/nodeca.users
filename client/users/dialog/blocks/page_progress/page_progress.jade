
- var current  = self.current;
- var total    = self.max;
- var page_max = Math.ceil(total / self.per_page) || 1;

//- ensure that current is in [1..total] range, except for 0/0
- current = total > 0 ? Math.max(1, Math.min(current, total)) : 0;

ul.nav.navbar-nav.page-progress(data-current=current, data-total=total)
  li.nav-item.page-progress__item
    a.nav-link.page-progress__button-first.icon.icon-to-top(
      href=self.link_to('users.dialog', { dialog_id: self.dialog_id, message_id: self.first_message_id })
    )

  li.nav-item.page-progress__item.dropdown
    a.nav-link.page-progress__info.dropdown-toggle(
      href='#'
      data-toggle='dropdown'
    )
      .page-progress__label
        span.page-progress__label-current= current || 0
        span.page-progress__label-total= total
      .page-progress__bar
        .page-progress__bar-fill(style="width: " + (current / total * 100).toFixed(2) + "%")

  li.nav-item.page-progress__item
    a.nav-link.page-progress__button-last.icon.icon-to-bottom(
      href=self.link_to('users.dialog', { dialog_id: self.dialog_id, message_id: self.last_message_id })
    )
